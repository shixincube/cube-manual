===============================
时信魔方介绍
===============================

时信魔方是什么？
===============================

:term:`时信魔方` 是面向开发者的实时协作开发框架。帮助开发者快速、高效的在项目中集成实时协作能力。从广义上讲，即时消息、音视频通话、实时白板、文档互传、在线会议都属于实时协作的功能范畴。这些功能帮助人们迅速地传递消息，同步资料并跟踪信息流，从而达到高效协作的目的。

时信魔方是 **开源项目** ，基于 `MIT/Expat License <http://www.opensource.org/licenses/mit-license.php>`__ 条款发布，在 `Gitee <https://gitee.com/shixinhulian/>`__ 和 `GitHub <https://github.com/shixincube/>`__ 上托管源代码。

支持的操作系统有：Windows、Linux 、macOS 、Android、iOS 等，支持的浏览器有：Chrome、Firefox、Safari 等。



功能介绍
-------------------------------

时信魔方包含以下协作功能：

1. 即时消息（Instant Messaging / IM）。支持卡片消息、通知消息、文件消息和自定义消息等。
2. 实时多人语音/多人视频（Multipoint RTC）。支持自适应码率、超低延迟等，支持实时图像识别等。
3. 超大规模(100+)视频会议 （Video Conference）。支持会议控制、演讲模式，自定义 MCU 和 SFU 布局等。
4. 群组管理（Group management）。支持集成式管理和扩展组织架构等。
5. 云端文件存储（Cloud File Storage）。支持无缝集成文档在线协作等。
6. 共享桌面（Remote Desktop Sharing）。支持无缝集成白板等。
7. 实时白板（Realtime Whiteboard）。支持集成媒体回放、远程桌面和文档分享等。
8. 视频直播（Live video）。支持第三方推流和 CDN ，无缝支持会议直播和回放等。
9. 在线文档协作（Online Document Collaboration）。支持 Word、PowerPoint、Excel 等主流格式文多人在写协作。
10. 安全与运维管理（Operation and Maintenance management）。所有数据通道支持加密，可支持国密算法等。
11. 风控管理（Risk Management）。对系统内所有文本、图片、视频、文件等内容进行包括 NLP、OCR、IR 等技术手段的风险控制和预警等。



独立的内核模块与开放的脚手架
-------------------------------

.. figure:: /images/cube-kernel-scaffold.png
   :align: center
   :alt: 内核模块与接口结构

   *内核模块与接口结构*

时信魔方按照经典的“面向接口的开发”原则设计脚手架。各个功能模块各自独立且遵循单向依赖原则，各个功能模块依赖的技术组件，例如：缓存器、消息队列、存储器等，都按照提供接口调用，便于开发者按照自身的开发需求选择和适配不同的技术组件来适应不同的运行环境和性能要求。

时信魔方的基础功能集均为独立开发，不依赖第三方业务组件，一方面提高模块之间的集成度和耦合度可以对性能进行架构级的优化，并且因为功能集适用范围广进行二次开发时不会带来引入第三方框架的适配和调试风险，另一方面，耦合度较高导致扩展的便利性降低，有时我们需要符合自身需求的第三方模块进行替换。因此时信魔方遵照上述结构，提供从底层的数据库存储，信息数据缓存到上层的业务功能的接口拓展方便进行二次开发和维护，开发者根据需要选择自己熟悉的数据库系统进行存储，或者选择第三方网盘替换魔方的文件存储模块，依然能保证文件快速的即时消息、会议等模块传输。



基于 SHM 的私有通信协议
-------------------------------

时信魔方没有采用通用的通信协议方案，而是针对性的开发了 :term:`Simple Hybrid Messaging` 简单混合消息传输协议，简称： **SHM** 。

.. figure:: /images/cell-struct.png
   :align: center
   :alt: Cell 通信结构

   *Cell 通信结构*

在时信魔方里实现该协议的工程是 :term:`Cell` ，Cell 支持直连 :term:`TCP` 和 :term:`WebSocket` 两种连接方式。 SHM 链路支持快速加密和数据压缩，同时 SHM 链路上允许同一连接同时投送报文数据和流数据，从而减少客户端设备对于链路的管理（不需要像 HTTP/HTTPS 协议那样需要连接池同时管理数个 TCP 连接）。



多平台适用
-------------------------------

.. figure:: /images/cube-framework.png
   :align: center
   :alt: 时信魔方框架结构

   *时信魔方框架结构*
